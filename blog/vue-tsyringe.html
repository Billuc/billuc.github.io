<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Billaud Luc - Website</title>
		<link rel="icon" href="../luc.webp" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Billuc's website, developped by Luc Billaud" />
		
		<link href="../_app/immutable/assets/0.81edc439.css" rel="stylesheet">
		<link href="../_app/immutable/assets/index.95b16411.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.bcaa2ad0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.7cfd5edb.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/singletons.7646cd5d.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/control.c2cf8273.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.24ff598e.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/preload-helper.a4192956.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.36f6a917.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/index.2284837b.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ContactLink.dcdcc0fa.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.ca1b884c.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">



<main><div><div class="text-slate-900 transition-all duration-500 ease-in-out relative flex flex-row w-full ">
<div class="fixed top-4 left-4 block md:hidden w-8 h-8 shadow-md cursor-pointer"><div id="profile" class="flex flex-col flex-nowrap justify-center items-center "><img alt="" src="/_app/immutable/assets/luc2.88a01e77.jpg" class="shadow-xl rounded-xl svelte-1u0cmp">
</div></div>

<div class="
		fixed md:relative top-0 left-0 
		bg-slate-900 text-slate-50 
		navbar z-10
		transition-transform duration-300 -translate-x-full md:translate-x-0 svelte-9idy07"><div class="sticky top-0 left-0 p-8 h-screen overflow-auto"><div id="profile" class="flex flex-col flex-nowrap justify-center items-center "><img alt="" src="/_app/immutable/assets/luc2.88a01e77.jpg" class="shadow-xl rounded-xl svelte-1u0cmp">
</div>

		<div class="text-center"><div class="text-xl font-black my-4">Luc Billaud</div>
			<div class="text-sm my-2">Fullstack developer based in Lyon, backend and DevOps enjoyer, geek and nerd
			</div></div>

		<div class="my-8"><a href="/" class="flex flex-row items-center px-8 py-0.5 border-sky-200 border-t last:border-b border-opacity-30 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 576 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(288 256)" transform-origin="144 0"><g transform="translate(0,0) scale(1,1)"><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z" fill="currentColor" transform="translate(-288 -256)"></path></g></g></svg></button>
	<div class="overflow-clip ml-2">Home</div></a>
			<a href="/resume" class="flex flex-row items-center px-8 py-0.5 border-sky-200 border-t last:border-b border-opacity-30 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 640 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(320 256)" transform-origin="160 0"><g transform="translate(0,0) scale(1,1)"><path d="M128 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm32 97.3c28.3-12.3 48-40.5 48-73.3c0-44.2-35.8-80-80-80S48 51.8 48 96c0 32.8 19.7 61 48 73.3V224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H288v54.7c-28.3 12.3-48 40.5-48 73.3c0 44.2 35.8 80 80 80s80-35.8 80-80c0-32.8-19.7-61-48-73.3V288H608c17.7 0 32-14.3 32-32s-14.3-32-32-32H544V169.3c28.3-12.3 48-40.5 48-73.3c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 32.8 19.7 61 48 73.3V224H160V169.3zM488 96a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM320 392a24 24 0 1 1 0 48 24 24 0 1 1 0-48z" fill="currentColor" transform="translate(-320 -256)"></path></g></g></svg></button>
	<div class="overflow-clip ml-2">Experiences</div></a>
			<a href="/skills" class="flex flex-row items-center px-8 py-0.5 border-sky-200 border-t last:border-b border-opacity-30 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 640 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(320 256)" transform-origin="160 0"><g transform="translate(0,0) scale(1,1)"><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z" fill="currentColor" transform="translate(-320 -256)"></path></g></g></svg></button>
	<div class="overflow-clip ml-2">Skills</div></a>
			<a href="/projects" class="flex flex-row items-center px-8 py-0.5 border-sky-200 border-t last:border-b border-opacity-30 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 448 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(224 256)" transform-origin="112 0"><g transform="translate(0,0) scale(1,1)"><path d="M288 0H160 128C110.3 0 96 14.3 96 32s14.3 32 32 32V196.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6C0 480.9 31.1 512 69.4 512H378.6c38.3 0 69.4-31.1 69.4-69.4c0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32s-14.3-32-32-32H288zM192 196.8V64h64V196.8c0 23.7 6.6 46.9 19 67.1L309.5 320h-171L173 263.9c12.4-20.2 19-43.4 19-67.1z" fill="currentColor" transform="translate(-224 -256)"></path></g></g></svg></button>
	<div class="overflow-clip ml-2">Projects</div></a>
			<a href="/blog" class="flex flex-row items-center px-8 py-0.5 border-sky-200 border-t last:border-b border-opacity-30 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 576 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(288 256)" transform-origin="144 0"><g transform="translate(0,0) scale(1,1)"><path d="M0 64C0 28.7 28.7 0 64 0H224V128c0 17.7 14.3 32 32 32H384V299.6l-94.7 94.7c-8.2 8.2-14 18.5-16.8 29.7l-15 60.1c-2.3 9.4-1.8 19 1.4 27.8H64c-35.3 0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9 0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6 0zM311.9 417L441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z" fill="currentColor" transform="translate(-288 -256)"></path></g></g></svg></button>
	<div class="overflow-clip ml-2">Blog</div></a></div>

		<div class="flex justify-center my-2"><a href="https://github.com/Billuc" class="px-0.5 py-0.5 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 496 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(248 256)" transform-origin="124 0"><g transform="translate(0,0) scale(1,1)"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" fill="currentColor" transform="translate(-248 -256)"></path></g></g></svg></button></a><a href="https://www.linkedin.com/in/luc-billaud" class="px-0.5 py-0.5 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 448 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(224 256)" transform-origin="112 0"><g transform="translate(0,0) scale(1,1)"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z" fill="currentColor" transform="translate(-224 -256)"></path></g></g></svg></button></a><a href="mailto:luc.billaud.pro@gmail.com" class="px-0.5 py-0.5 hover:text-red-300 "><button class="
		 rounded
		w-8 h-8 flex justify-center items-center 
		"><svg class="svelte-fa  svelte-1cj2gr0" style="height:1em;vertical-align:-.125em;transform-origin:center;overflow:visible" viewBox="0 0 512 512" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg"><g transform="translate(256 256)" transform-origin="128 0"><g transform="translate(0,0) scale(1,1)"><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z" fill="currentColor" transform="translate(-256 -256)"></path></g></g></svg></button></a></div></div></div>


<div class="fixed top-0 left-0 w-screen h-screen bg-slate-900 opacity-50 cursor-pointer hidden svelte-9idy07"></div>

		<div class="min-h-screen grow max-w-full md:max-w-[70%] bg-slate-100 flex flex-col justify-between "><div class="w-11/12 mx-auto py-6 grow flex"><div class="py-16 text-center w-full"><article class="flex flex-col items-center"><span class="text-4xl font-black text-slate-900">Using Dependency Injection in Vue3 + Vite with Tsyringe</span>
		<div class="my-4 border-b-2 border-red-600 border-opacity-30 w-40"></div>

		<p class="text-sm italic mb-8">Published: 17/08/2024, last updated: 18/08/2024</p>

		<div class="px-4 md:px-10 lg:px-20 mx-auto self-stretch text-justify prose md:prose-lg max-w-full"><blockquote><p><em>DISCLAIMER:</em> this does not work, I managed to make tsyringe work in one project, but it doesn’t in <a href="https://github.com/Billuc/vue-vite-tsyringe" rel="nofollow">this example repo</a> and the reason why is not trivial. Since the last release of tsyringe dates to 2020, I recommend using another library such as <a href="https://github.com/inversify/InversifyJS" rel="nofollow">InversifyJS</a> !</p></blockquote>
<h2>Introduction</h2>
<p>When you create a class, it often depends on other classes. For example, for a Web server, you can have controllers that depend on services and those services themselves depend on repositories. Thus, if we want to use our controller, we have to provide it a service and to do so, we have to provide the service a repository… You get the idea !</p>
<p>One solution to this problem is <a href="https://en.wikipedia.org/wiki/Dependency_injection" rel="nofollow">Dependency Injection (DI)</a>. With dependency injection, I only have to add the dependencies to the constructor of the class I am writing and they are automatically provided. I don’t have to create them, to worry about leakage or anything ! This is like magic ! As a plus, it makes it very easy to manage your classes’ lifecycles. You need a singleton, register your class as a singleton ! You need a new instance each time, register your class with a factory !</p>
<h2>My experience with DI</h2>
<p>I discovered DI with backends written with statically typed programming languages, namely .NET Core with C# and Spring Boot with Java. With those technologies, you have to write interfaces, which may seem like more work, but also allows to change the implementations easily and really decouple classes from their dependencies.</p>
<p>I have gotten used to using DI so much that I now use it in almost all my projects, even though I am not coding with a statically typed language.</p>
<blockquote><p>Note: I even wrote a DI library for Python called <a href="https://github.com/Billuc/Taipan-DI" rel="nofollow">taipan-di</a></p></blockquote>
<p>As a lot of my projects lately involve some frontend framework, I had to find a JS or TS library for that. At that time I was working on the project <a href="https://billuc.github.io/Muninn" rel="nofollow">Muninn</a>. I knew that Angular had its own DI mechanism implemented, but Muninn uses Vue3. A library we used at a company I used to work at was <a href="https://github.com/microsoft/tsyringe" rel="nofollow">tsyringe</a>. This library is very powerful and very pratical since it relies on decorators to register or mark classes as injectable. Here is how I integrated tsyringe into my Vue3 project.</p>
<h2>Integrating Tsyringe</h2>
<p>This part is adapted from <a href="https://medium.com/@mohamed.ma872/a-step-by-step-guide-to-using-tsyringe-for-dependency-injection-in-typescript-842443bcd24f" rel="nofollow">this blog</a>. The tutorial is meant for Node.JS, but the procedure is similar for Vue, just slightly modified to fit our setup.</p>
<p>First, create your Vue + Vite project</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token comment"># npm 7+, extra double-dash is needed:</span>
<span class="token function">npm</span> create vite@latest vue-vite-tsyringe -- <span class="token parameter variable">--template</span> vue-ts</code><!-- HTML_TAG_END --></pre>
<p>Then, install the dependencies</p>
<pre class="language-bash"><!-- HTML_TAG_START --><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> tsyringe
<span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript reflect-metadata @rollup/plugin-typescript</code><!-- HTML_TAG_END --></pre>
<blockquote><p><code>reflect-metadata</code> is a dependency that allows us to use decorators. In more details it is a polyfill that provides the Reflect API.</p></blockquote>
<blockquote><p><code>@rollup/plugin-typescript</code> is a plugin for Rollup (which is the bundler used by Vite under the hood). This is a crucial dependency to make tsyringe work with Vite as Rollup does not support decorators by default.</p></blockquote>
<p>Next, add those properties to the <code>tsconfig.json</code> file (or <code>tsconfig.app.json</code> in the repo)</p>
<pre class="language-json"><!-- HTML_TAG_START --><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        ...
        <span class="token property">"experimentalDecorators"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">"emitDecoratorMetadata"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code><!-- HTML_TAG_END --></pre>
<p>These properties are here to help with decorators.</p>
<p>Modify the <code>vite.config.ts</code> file to use the Rollup plugin</p>
<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token operator">...</span>
<span class="token keyword">import</span> rollupTypescript <span class="token keyword">from</span> <span class="token string">"@rollup/plugin-typescript"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">rollupTypescript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code><!-- HTML_TAG_END --></pre>
<blockquote><p><em>IMPORTANT:</em> Note that the rollupTypescript plugin has to be in second position -right after the vue plugin- in order for this to work !</p></blockquote>
<p>Finally, import the Reflect polyfill in the <code>main.ts</code> file.</p>
<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">import</span> <span class="token string">"reflect-metadata"</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code><!-- HTML_TAG_END --></pre>
<p>This is enough to use tsyringe in your Vite project.</p>
<h2>My way of using it in Vue</h2>
<p>In my Vue project, I added some stuff to simplify my life when coding services and components. You can take inspiration from them if you want to !</p>
<p>First I created a Vue plugin to register my services.</p>
<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> container <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'tsyringe'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> Plugin <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> containerPlugin<span class="token operator">:</span> <span class="token function-variable function">Plugin</span> <span class="token operator">=</span> <span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// This not necessary, container is already the default container provided by tsyringe and can be used directly</span>
	<span class="token keyword">const</span> myContainer <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">createChildContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Register services here</span>
	<span class="token comment">// Example</span>
	<span class="token comment">// myContainer.registerSingleton(Database);</span>

	<span class="token comment">// That allows us to get an easy access to our container in the components</span>
	app<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">,</span> myContainer<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> app<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> containerPlugin<span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre>
<p>Then, registered the plugin in <code>main.ts</code>.</p>
<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>containerPlugin<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre>
<p>Then, I created a utility composable / hook to resolve the services in the components.</p>
<pre class="language-ts"><!-- HTML_TAG_START --><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> inject <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">&#123;</span> DependencyContainer<span class="token punctuation">,</span> InjectionToken <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'tsyringe'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useService <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>token<span class="token operator">:</span> InjectionToken<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// This returns the container provided in the plugin</span>
	<span class="token keyword">const</span> myContainer<span class="token operator">:</span> DependencyContainer <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>myContainer<span class="token punctuation">)</span>
		<span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">'DependencyContainer not available ! Are you using the DI plugin ?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> myContainer<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre>
<p>Create your services, add them to the container in the plugin and use <code>useService</code> to resolve them in your components.</p>
<h2>Conclusion</h2>
<p>Here is how I setup my project to work with dependency injection in Vue and Vite. This should allow you to create Vue components in a more modular way with more streamlined development cycles.</p>
<p>Feel free to experiment with that and to give me your feedback.</p></div></article></div></div>

			<div class="mx-auto mb-4 text-center w-11/12 opacity-60 text-sm">Website developped by Luc Billaud using Svelte, Vite, Tailwind, FontAwesome, Github &amp; Github
				Actions
			</div></div></div></div></main>


			
			<script>
				{
					__sveltekit_tjqa42 = {
						base: new URL("..", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("../_app/immutable/entry/start.bcaa2ad0.js"),
						import("../_app/immutable/entry/app.24ff598e.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
